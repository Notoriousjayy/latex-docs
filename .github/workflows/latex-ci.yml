# .github/workflows/latex-ci.yml
# CI workflow: Build and validate LaTeX documents on PRs and pushes
name: LaTeX CI

on:
  workflow_dispatch:
    inputs:
      build-all:
        description: 'Build all documents (ignore change detection)'
        type: boolean
        default: false
  pull_request:
    paths:
      - 'src/**/*.tex'
      - 'src/**/*.puml'
      - 'tooling/**'
      - '.github/workflows/*.yml'
      - '.github/actions/**'
  push:
    branches: [main]
    paths:
      - 'src/**/*.tex'
      - 'src/**/*.puml'
      - 'tooling/**'
      - '.github/workflows/*.yml'
      - '.github/actions/**'

concurrency:
  group: latex-ci-${{ github.ref }}
  cancel-in-progress: true

jobs:
  build:
    uses: ./.github/workflows/_build-latex.yml
    with:
      build-all: ${{ inputs.build-all || false }}
      upload-artifacts: true
      render-plantuml: true
