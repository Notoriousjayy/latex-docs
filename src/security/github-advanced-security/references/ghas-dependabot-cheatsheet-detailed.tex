% ghas-dependabot-cheatsheet-detailed.tex
% CI-safe: No minted, no Pygments, no shell-escape required
\documentclass[10pt,letterpaper]{article}

% === Encoding & Fonts ===
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{microtype}

% === Page Layout ===
\usepackage[letterpaper,margin=0.8in]{geometry}
\usepackage{parskip}

% === Colors ===
\usepackage{xcolor}
\definecolor{CodeBg}{HTML}{F3F4F6}
\definecolor{Ink}{HTML}{1F2937}
\definecolor{Accent}{HTML}{2563EB}
\definecolor{Gray}{HTML}{6B7280}

% === Hyperlinks ===
\usepackage{hyperref}
\hypersetup{colorlinks=true, linkcolor=Accent, urlcolor=Accent, citecolor=Accent}

% === Headings ===
\usepackage{titlesec}
\titleformat{\section}{\large\bfseries\color{Ink}}{}{0pt}{}
\titlespacing*{\section}{0pt}{8pt}{4pt}
\titleformat{\subsection}{\bfseries\color{Ink}}{}{0pt}{}
\titlespacing*{\subsection}{0pt}{6pt}{3pt}

% === Lists ===
\usepackage{enumitem}
\setlist{nosep, leftmargin=1.2em, topsep=3pt}

% === Code Blocks (listings only) ===
\usepackage{listings}
\usepackage{upquote}

\lstset{
  basicstyle=\ttfamily\small,
  backgroundcolor=\color{CodeBg},
  breaklines=true,
  columns=fullflexible,
  keepspaces=true,
  showstringspaces=false,
  frame=single,
  framerule=0.4pt,
  tabsize=2,
  aboveskip=8pt,
  belowskip=8pt
}

\lstnewenvironment{yamlcode}{\lstset{}}{}
\lstnewenvironment{bashcode}{\lstset{language=bash}}{}

% === Silence missing .toc on first run ===
\makeatletter
\let\orig@starttoc\@starttoc
\def\@starttoc#1{\IfFileExists{\jobname.#1}{\orig@starttoc{#1}}{}}
\makeatother

% === Document ===
\begin{document}

\begin{center}
{\Large \textbf{Dependabot \& Dependency Graph --- 1 Page Cheat Sheet}}\\[4pt]
{\color{Gray}\small Quick reference for GitHub's dependency management features}
\end{center}

\section{Dependency Graph}

\begin{itemize}
  \item Automatically detects dependencies from manifest files (package.json, requirements.txt, etc.)
  \item Shows both direct and transitive dependencies
  \item Accessible via \textbf{Insights} $\rightarrow$ \textbf{Dependency graph}
  \item Supports 20+ ecosystems including npm, pip, Maven, Gradle, Go modules
\end{itemize}

\section{Dependabot Alerts}

\begin{itemize}
  \item Automatically notifies when dependencies have known vulnerabilities
  \item Severity levels: Critical, High, Medium, Low
  \item Based on GitHub Advisory Database and CVE data
  \item View in \textbf{Security} $\rightarrow$ \textbf{Dependabot alerts}
\end{itemize}

\section{Dependabot Security Updates}

Enable automatic PRs for vulnerable dependencies:

\begin{yamlcode}
# .github/dependabot.yml
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
\end{yamlcode}

\section{Dependabot Version Updates}

Keep dependencies up-to-date (not just security fixes):

\begin{yamlcode}
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10
    groups:
      dev-dependencies:
        patterns: ["*"]
        dependency-type: "development"
\end{yamlcode}

\section{CLI Commands}

\begin{bashcode}
# List alerts
gh api repos/{owner}/{repo}/dependabot/alerts

# Dismiss alert
gh api repos/{owner}/{repo}/dependabot/alerts/{id} \
  -X PATCH -f state=dismissed -f dismissed_reason="tolerable_risk"

# Enable Dependabot
gh api repos/{owner}/{repo}/vulnerability-alerts -X PUT
\end{bashcode}

\section{Best Practices}

\begin{itemize}
  \item Enable Dependabot for all repositories in your organization
  \item Set up branch protection requiring security checks
  \item Review and merge Critical/High alerts within 24--48 hours
  \item Use grouped updates to reduce PR noise
  \item Configure \texttt{reviewers} and \texttt{labels} in dependabot.yml
\end{itemize}

\end{document}
