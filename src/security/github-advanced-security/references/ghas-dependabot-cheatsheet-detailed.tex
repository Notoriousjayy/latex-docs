% !TEX program = pdflatex
\documentclass[10pt,letterpaper]{article}

% ---------- Encoding & fonts ----------
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{inconsolata}
\usepackage{microtype}

% ---------- Page layout ----------
\usepackage[letterpaper,margin=0.8in]{geometry}
\usepackage{parskip}

% ---------- Colors (must come before titlesec) ----------
\usepackage{xcolor}
\definecolor{Ink}{HTML}{1F2937}
\definecolor{Accent}{HTML}{2563EB}
\definecolor{CodeBG}{HTML}{F3F4F6}
\definecolor{Gray}{HTML}{6B7280}
\definecolor{soft}{HTML}{F3F4F6}

% ---------- Links ----------
\usepackage{hyperref}
\hypersetup{colorlinks=true, linkcolor=Accent, urlcolor=Accent, citecolor=Accent}

% ---------- Headings ----------
\usepackage{titlesec}
\titleformat{\section}{\large\bfseries\color{Ink}}{}{0pt}{}
\titlespacing*{\section}{0pt}{6pt}{3pt}
\titleformat{\subsection}{\bfseries\color{Ink}}{}{0pt}{}
\titlespacing*{\subsection}{0pt}{4pt}{2pt}

% ---------- Lists ----------
\usepackage{enumitem}
\setlist{nosep, leftmargin=1.1em, topsep=2pt}

% ---------- Code blocks (listings only - CI safe) ----------
\usepackage{listings}
\usepackage{upquote}

\lstdefinelanguage{yaml}{
  keywords={true,false,null},
  sensitive=false,
  comment=[l]{\#},
  morestring=[b]',
  morestring=[b]"
}

\lstset{
  basicstyle=\ttfamily\small,
  backgroundcolor=\color{soft},
  breaklines=true,
  breakatwhitespace=false,
  columns=fullflexible,
  keepspaces=true,
  showstringspaces=false,
  frame=single,
  framerule=0.4pt,
  tabsize=2,
  aboveskip=6pt,
  belowskip=6pt,
  literate=
    {—}{{---}}1
    {–}{{--}}1
    {→}{{$\rightarrow$}}1
}

% Minted-compatible environments
\lstnewenvironment{minted}[2][]{\lstset{}}{}
\newcommand{\mintinline}[3][]{\texttt{#3}}

% ---------- Silence first-run missing .toc ----------
\makeatletter
\let\ci@orig@starttoc\@starttoc
\def\@starttoc#1{%
  \begingroup
  \IfFileExists{\jobname.#1}{\ci@orig@starttoc{#1}}{}%
  \endgroup
}
\makeatother

% ---------- Fix inconsolata/zi4 italic warning ----------
\makeatletter
\@ifundefined{DeclareFontShape}{}{%
  \DeclareFontShape{T1}{zi4}{m}{it}{<->ssub*zi4/m/sl}{}
  \DeclareFontShape{T1}{zi4}{b}{it}{<->ssub*zi4/b/sl}{}
}
\makeatother

\begin{document}
\begin{center}
{\Large \textbf{Dependabot \& Dependency Graph — 1 Page Cheat Sheet}}\\
\smallskip
{\color{Gray}\small Quick reference for GitHub's dependency management features}
\end{center}

\section{Dependency Graph}
\begin{itemize}
  \item Automatically detects dependencies from manifest files (package.json, requirements.txt, etc.)
  \item Shows both direct and transitive dependencies
  \item Accessible via \textbf{Insights} → \textbf{Dependency graph}
  \item Supports 20+ ecosystems including npm, pip, Maven, Gradle, Go modules
\end{itemize}

\section{Dependabot Alerts}
\begin{itemize}
  \item Automatically notifies when dependencies have known vulnerabilities
  \item Severity levels: Critical, High, Medium, Low
  \item Based on GitHub Advisory Database and CVE data
  \item View in \textbf{Security} → \textbf{Dependabot alerts}
\end{itemize}

\section{Dependabot Security Updates}
Enable automatic PRs for vulnerable dependencies:
\begin{minted}{yaml}
# .github/dependabot.yml
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
\end{minted}

\section{Dependabot Version Updates}
Keep dependencies up-to-date (not just security fixes):
\begin{minted}{yaml}
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10
    groups:
      dev-dependencies:
        patterns: ["*"]
        dependency-type: "development"
\end{minted}

\section{CLI Commands}
\begin{minted}{bash}
# List alerts
gh api repos/{owner}/{repo}/dependabot/alerts

# Dismiss alert
gh api repos/{owner}/{repo}/dependabot/alerts/{id} \
  -X PATCH -f state=dismissed -f dismissed_reason="tolerable_risk"

# Enable Dependabot
gh api repos/{owner}/{repo}/vulnerability-alerts -X PUT
\end{minted}

\section{Best Practices}
\begin{itemize}
  \item Enable Dependabot for all repositories in your organization
  \item Set up branch protection requiring security checks
  \item Review and merge Critical/High alerts within 24-48 hours
  \item Use grouped updates to reduce PR noise
  \item Configure \texttt{reviewers} and \texttt{labels} in dependabot.yml
\end{itemize}

\end{document}
