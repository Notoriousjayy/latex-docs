@startuml
skinparam backgroundColor #FEFEFE
skinparam defaultFontSize 11
skinparam defaultFontName Arial
skinparam shadowing false

skinparam component {
    BorderColor #455A64
}

skinparam database {
    BackgroundColor #FFF3E0
    BorderColor #E65100
}

title Data Flow Relations\nReads-from, writes-to, and schema dependencies

database "Customer\nDatabase" as custdb
database "Order\nDatabase" as orderdb
database "Analytics\nWarehouse" as warehouse

[Order\nService] as orderSvc #E8F5E9
[Customer\nService] as custSvc #E8F5E9
[ETL\nPipeline] as etl #F3E5F5
[Reporting\nDashboard] as reporting #E3F2FD
[ML Model\nTraining] as ml #E3F2FD

custSvc --> custdb : <<writes-to>>\nCRUD ops
orderSvc --> orderdb : <<writes-to>>\nTransactions

orderSvc --> custdb : <<reads-from>>\nLookup
reporting --> warehouse : <<reads-from>>\nQueries
ml --> warehouse : <<reads-from>>\nBatch

etl --> custdb : <<reads-from>>
etl --> orderdb : <<reads-from>>
etl --> warehouse : <<writes-to>>\nLoad

orderSvc ..> custdb : <<schema-dep>>

note right of custdb
  Attachment Properties:
  Access mode: read/write
  Connector: JDBC
  Permissions: service account
end note

note bottom of warehouse
  Data Flow:
  Operational -> ETL -> Warehouse -> Analytics
end note

legend right
  | Relation | Description |
  | writes-to | Data production |
  | reads-from | Data consumption |
  | schema-dep | Schema coupling |
endlegend

@enduml
