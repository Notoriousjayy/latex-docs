@startuml
skinparam backgroundColor #FEFEFE
skinparam defaultFontName Helvetica
skinparam defaultFontSize 11
skinparam componentStyle rectangle

skinparam package {
    BackgroundColor #FFFFFF
    BorderColor #888888
    FontColor #333333
}

title Publish-Subscribe Connector Types\nDifferent mechanisms for event routing and distribution

package "Topic-Based Connector" {
    component "Publisher" as TP #4A90D9
    component "Topic\nRouter" as TR #F5A623
    component "Sub A\n(topic: orders)" as TS1 #5BAE5B
    component "Sub B\n(topic: orders)" as TS2 #5BAE5B
    
    TP -right-> TR : "orders/*"
    TR -right-> TS1
    TR -right-> TS2
}

note bottom of TR
  Routes by named topics
  Most common pattern
end note

package "Content-Based Connector" {
    component "Publisher" as CP #4A90D9
    component "Content\nMatcher" as CM #F5A623
    component "Sub X\n(price > 100)" as CS1 #5BAE5B
    component "Sub Y\n(region = US)" as CS2 #5BAE5B
    
    CP -right-> CM : "event data"
    CM -right-> CS1
    CM -right-> CS2
}

note bottom of CM
  Routes by predicates
  on event content
end note

package "Type-Based Connector" {
    component "Publisher" as YP #4A90D9
    component "Type\nHierarchy" as TH #F5A623
    component "Sub M\n(PaymentEvent)" as YS1 #5BAE5B
    component "Sub N\n(Event)" as YS2 #5BAE5B
    
    YP -right-> TH : "RefundEvent"
    TH -right-> YS1
    TH -right-> YS2
}

note bottom of TH
  Routes by event type
  inheritance hierarchy
end note

@enduml
