@startuml parallel-pipeline-pattern
' Parallel Pipeline Pattern
' Shows data parallelism with replicated filter instances

title Parallel Pipeline Pattern: Data Parallelism

[Source] <<source>> as Source

[Partitioner] <<splitter>> as Partition

rectangle "Parallel Filter Instances" #F5F5F5 {
    [Filter\nInstance 1] <<transformer>> as F1
    [Filter\nInstance 2] <<transformer>> as F2
    [Filter\nInstance 3] <<transformer>> as F3
}

[Merger] <<aggregator>> as Merge

[Sink] <<sink>> as Sink

Source -down-> Partition : "data stream"

Partition -down-> F1 : "partition 1"
Partition -down-> F2 : "partition 2"
Partition -down-> F3 : "partition 3"

F1 -down-> Merge
F2 -down-> Merge
F3 -down-> Merge

Merge -down-> Sink : "merged results"

note right of Partition
    Partitioning strategies:
    • Round-robin
    • Hash-based
    • Range-based
end note

note right of Merge
    Ordering may need
    to be restored
end note

legend bottom
    Each filter instance processes different data items concurrently.
    Throughput scales with number of instances.
endlegend

@enduml
