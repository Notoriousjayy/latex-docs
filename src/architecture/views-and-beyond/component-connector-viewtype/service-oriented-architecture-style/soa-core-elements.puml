@startuml soa-core-elements
!define PRIMARY #4A90A4
!define SECONDARY #E8A838
!define NEUTRAL #888888
!define LIGHTBG #F8F9FA

skinparam backgroundColor white
skinparam componentStyle rectangle
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam padding 8
skinparam roundCorner 8

skinparam component {
    BackgroundColor<<provider>> PRIMARY
    FontColor<<provider>> white
    BorderColor<<provider>> #3A7084
    
    BackgroundColor<<consumer>> SECONDARY
    FontColor<<consumer>> white
    BorderColor<<consumer>> #C88A28
    
    BackgroundColor<<infra>> LIGHTBG
    FontColor<<infra>> #333333
    BorderColor<<infra>> NEUTRAL
}

skinparam rectangle {
    BackgroundColor #FFFFFF
    BorderColor #CCCCCC
    BorderStyle dashed
}

skinparam arrow {
    Color #555555
    FontColor #555555
    FontSize 10
}

title SOA Core Elements

rectangle "Service Consumers" as consumers {
    component "Web\nApplication" as webapp <<consumer>>
    component "Mobile\nClient" as mobile <<consumer>>
    component "Integration\nAdapter" as adapter <<consumer>>
}

rectangle "Infrastructure Layer" as infra {
    component "API Gateway" as gateway <<infra>>
    component "Service\nRegistry" as registry <<infra>>
    component "ESB" as esb <<infra>>
}

rectangle "Service Providers" as providers {
    component "Entity\nService" as entity <<provider>>
    component "Task\nService" as task <<provider>>
    component "Utility\nService" as utility <<provider>>
    component "Integration\nService" as integration <<provider>>
}

' Consumer to Gateway connections
webapp -down-> gateway : REST
mobile -down-> gateway : REST
adapter -down-> gateway : SOAP

' Gateway interactions
gateway -down-> esb : routes
gateway .right.> registry : discovers

' ESB to Services
esb -down-> entity : invokes
esb -down-> task : invokes
esb -down-> utility : invokes
esb -down-> integration : invokes

' Registry interactions
entity .up.> registry : registers
task .up.> registry : registers
utility .up.> registry : registers
integration .up.> registry : registers

' Service interactions
task --> entity : uses
task --> utility : uses

legend right
    |<back:PRIMARY>     </back>| Service Provider |
    |<back:SECONDARY>     </back>| Service Consumer |
    |<back:LIGHTBG>     </back>| Infrastructure |
endlegend

@enduml
