@startuml

skinparam backgroundColor #FEFEFE
skinparam defaultFontName Helvetica
skinparam defaultFontSize 12
skinparam shadowing false
skinparam activityBackgroundColor #FFFFFF
skinparam activityBorderColor #475569
skinparam activityFontColor #1E293B

title Advice Execution Order at a Join Point\n(Security = high precedence, Logging = low precedence)

start

partition "Before Advice (highest precedence first)" #FFF8E1 {
  :Security.before()
  Check authorization;
  :Logging.before()
  Log method entry;
}

partition "Around Advice (highest precedence outermost)" #EFF6FF {
  :Security.around()
  Wrap execution;
  :Logging.around()
  Start timer;
  :proceed();
}

partition "Original Join Point" #E2E8F0 {
  :target.method()
  Execute business logic;
}

partition "After Advice (lowest precedence first)" #ECFDF5 {
  :Logging.afterReturning()
  Log result and stop timer;
  :Security.afterReturning()
  Audit success;
}

stop

note right
  Higher precedence aspects
  **wrap** lower precedence.
  Before: high to low
  After: low to high
end note

@enduml
