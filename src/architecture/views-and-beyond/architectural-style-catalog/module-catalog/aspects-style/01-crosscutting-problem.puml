@startuml

skinparam backgroundColor #FEFEFE
skinparam defaultFontName Helvetica
skinparam defaultFontSize 12
skinparam shadowing false
skinparam roundcorner 8
skinparam packageBackgroundColor #F0F4F8
skinparam packageBorderColor #94A3B8
skinparam packageFontColor #1E293B
skinparam rectangleFontColor #1E293B
skinparam rectangleBorderColor #94A3B8

title The Crosscutting Problem: Scattering and Tangling

package "OrderService" as os #FFFFFF {
  rectangle "Business Logic" as os_bl #DBEAFE
  rectangle "Logging" as os_log #FDE68A
  rectangle "Security" as os_sec #FECACA
  rectangle "Transaction" as os_tx #D1FAE5
}

package "PaymentService" as ps #FFFFFF {
  rectangle "Business Logic" as ps_bl #DBEAFE
  rectangle "Logging" as ps_log #FDE68A
  rectangle "Security" as ps_sec #FECACA
  rectangle "Transaction" as ps_tx #D1FAE5
}

package "InventoryService" as inv #FFFFFF {
  rectangle "Business Logic" as inv_bl #DBEAFE
  rectangle "Logging" as inv_log #FDE68A
  rectangle "Security" as inv_sec #FECACA
  rectangle "Transaction" as inv_tx #D1FAE5
}

note bottom of ps
  **Code Scattering**: Logging, Security, and Transaction
  code is duplicated across every module.
  **Code Tangling**: Each module mixes business
  logic with crosscutting concerns.
end note

legend bottom right
  |= Color |= Concern |
  |<#DBEAFE> | Core Business Logic |
  |<#FDE68A> | Logging (scattered) |
  |<#FECACA> | Security (scattered) |
  |<#D1FAE5> | Transaction (scattered) |
end legend

@enduml
