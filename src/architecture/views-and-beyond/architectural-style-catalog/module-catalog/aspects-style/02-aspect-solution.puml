@startuml

skinparam backgroundColor #FEFEFE
skinparam defaultFontName Helvetica
skinparam defaultFontSize 12
skinparam shadowing false
skinparam roundcorner 8
skinparam packageBackgroundColor #F0F4F8
skinparam packageBorderColor #94A3B8
skinparam rectangleFontColor #1E293B
skinparam rectangleBorderColor #94A3B8

title Aspect Solution: Modularized Crosscutting Concerns

together {
  package "<<aspect>> LoggingAspect" as la #FDE68A {
    rectangle "pointcut: service.*\nbefore + after advice" as la_d #FFF8E1
  }

  package "<<aspect>> SecurityAspect" as sa #FECACA {
    rectangle "pointcut: @Secured\nbefore advice" as sa_d #FFF5F5
  }

  package "<<aspect>> TransactionAspect" as ta #D1FAE5 {
    rectangle "pointcut: @Transactional\naround advice" as ta_d #ECFDF5
  }
}

together {
  package "OrderService" as os #DBEAFE {
    rectangle "Business Logic only" as os_bl #EFF6FF
  }

  package "PaymentService" as ps #DBEAFE {
    rectangle "Business Logic only" as ps_bl #EFF6FF
  }

  package "InventoryService" as inv #DBEAFE {
    rectangle "Business Logic only" as inv_bl #EFF6FF
  }
}

la ..[#B45309]..> os : <<crosscuts>>
la ..[#B45309]..> ps : <<crosscuts>>
la ..[#B45309]..> inv : <<crosscuts>>

sa ..[#DC2626]..> os : <<crosscuts>>
sa ..[#DC2626]..> ps : <<crosscuts>>

ta ..[#16A34A]..> os : <<crosscuts>>
ta ..[#16A34A]..> ps : <<crosscuts>>
ta ..[#16A34A]..> inv : <<crosscuts>>

note bottom of ps
  Base modules contain **only** business logic.
  Crosscutting concerns are modularized in aspects
  and applied via the **crosscuts** relation.
end note

@enduml
