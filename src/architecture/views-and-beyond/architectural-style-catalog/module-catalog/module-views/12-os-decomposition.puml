@startuml

skinparam backgroundColor #FFFFFF
skinparam defaultFontName "Helvetica"
skinparam defaultFontSize 12
skinparam shadowing false
skinparam roundCorner 8

skinparam package {
  FontSize 13
  FontStyle bold
}

skinparam rectangle {
  FontSize 11
}

title <b>Operating System â€” Hierarchical Decomposition</b>\nMajor subsystems and their internal modules

package "Operating System" #EFF6FF {

  package "Kernel" #DBEAFE {
    rectangle "Process\nManagement" as PM #BFDBFE
    rectangle "Memory\nManagement" as MM #BFDBFE
    rectangle "I/O\nManagement" as IO #BFDBFE
  }

  package "File Systems" #DBEAFE {
    rectangle "VFS Layer" as VFS #BFDBFE
    rectangle "FS Implementations\n(ext4, NTFS, ...)" as FSI #BFDBFE
  }

  package "Device Drivers" #DBEAFE {
    rectangle "Driver\nFramework" as DF #BFDBFE
    rectangle "Specific\nDrivers" as SD #BFDBFE
  }

  package "Networking" #DBEAFE {
    rectangle "Protocol\nStack" as PS #BFDBFE
    rectangle "Network\nInterfaces" as NI #BFDBFE
  }
}

rectangle "User Processes" as UP #F3F4F6
rectangle "System Call Interface" as SCI #E5E7EB
rectangle "Hardware Abstraction" as HA #E5E7EB

UP -[#4B5563,bold]down-> SCI : " depends on "
SCI -[#4B5563,bold]down-> PM
SCI -[#4B5563]down-> MM
SCI -[#4B5563]down-> VFS
PM -[#4B5563]down-> HA
MM -[#4B5563]down-> HA
IO -[#4B5563]down-> HA

note right of HA
  Dependencies flow
  strictly downward.
end note
@enduml
