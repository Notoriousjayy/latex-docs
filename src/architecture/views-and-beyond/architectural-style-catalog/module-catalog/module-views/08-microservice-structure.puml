@startuml

skinparam backgroundColor #FFFFFF
skinparam defaultFontName "Helvetica"
skinparam defaultFontSize 12
skinparam shadowing false
skinparam roundCorner 8
skinparam padding 4

skinparam package {
  FontSize 14
  FontStyle bold
}

skinparam rectangle {
  FontSize 11
}

title <b>Microservice â€” Internal Module Structure</b>\nDependencies flow inward toward the domain layer

package "API Layer" <<Rectangle>> #FCE7F3 {
  rectangle "REST\nControllers" as RC #FBCFE8
  rectangle "DTOs" as DTO #FBCFE8
}

package "Domain Layer" <<Rectangle>> #EFF6FF {
  rectangle "Entities" as ENT #DBEAFE
  rectangle "Domain\nServices" as DS #DBEAFE
  rectangle "Repository\nInterfaces" as RI #DBEAFE
}

package "Infrastructure Layer" <<Rectangle>> #F3F4F6 {
  rectangle "Database\nAccess" as DB #E5E7EB
  rectangle "Messaging" as MSG #E5E7EB
  rectangle "External\nClients" as EC #E5E7EB
}

RC -[#E11D48,bold]down-> DS : " invokes "
RC -[#E11D48,bold]down-> DTO
DTO -[#E11D48]down-> ENT

DB -[#2563EB,bold]up-.|> RI : " implements "
MSG -[#2563EB]up-.-> DS
EC -[#2563EB]up-.-> RI

note bottom of RI
  Domain defines interfaces;
  Infrastructure provides
  concrete implementations.
end note
@enduml
