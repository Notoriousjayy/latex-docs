@startuml
skinparam backgroundColor #FEFEFE
skinparam defaultFontSize 11
skinparam shadowing false
skinparam rectangleRoundCorner 8
skinparam rectangleFontSize 11
skinparam rectangleFontStyle bold
skinparam packageFontSize 13
skinparam packageFontStyle bold
skinparam packageRoundCorner 8

title Common Layered Architectures Compared\nThree established patterns for organizing layers

package "Three-Layer\nArchitecture" as TL #F5F5F5 {
  rectangle "**Presentation**\nViews, Controllers" as T3 #B3D9FF
  rectangle "**Business**\nRules, Entities" as T2 #CCE5CC
  rectangle "**Data**\nRepositories, Queries" as T1 #FFE0B2

  T3 -[#3366AA]-> T2
  T2 -[#3366AA]-> T1
}

package "Clean Architecture\n(Robert Martin)" as CA #F5F5F5 {
  rectangle "**Frameworks**\nWeb, DB, Drivers" as C4 #B3D9FF
  rectangle "**Interface Adapters**\nControllers, Gateways" as C3 #CCE5CC
  rectangle "**Use Cases**\nApp Business Rules" as C2 #FFE0B2
  rectangle "**Entities**\nEnterprise Rules" as C1 #E0CFE8

  C4 -[#3366AA]-> C3
  C3 -[#3366AA]-> C2
  C2 -[#3366AA]-> C1
}

package "DDD Layers\n(Eric Evans)" as DDD #F5F5F5 {
  rectangle "**User Interface**\nPresentation" as D4 #B3D9FF
  rectangle "**Application**\nCoordination" as D3 #CCE5CC
  rectangle "**Domain**\nModel, Rules" as D2 #FFE0B2
  rectangle "**Infrastructure**\nTechnical Services" as D1 #E0CFE8

  D4 -[#3366AA]-> D3
  D3 -[#3366AA]-> D2
  D2 ..[#999999,dashed].> D1 : infra supports\nall layers
}

note bottom of TL
  Classic separation
  of concerns
end note

note bottom of CA
  Dependencies point
  **inward** toward entities
end note

note bottom of DDD
  Domain is protected;
  infra is pluggable
end note
@enduml
