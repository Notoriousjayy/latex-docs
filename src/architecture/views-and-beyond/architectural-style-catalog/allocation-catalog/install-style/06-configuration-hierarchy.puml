@startuml
skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam shadowing false

skinparam rectangle {
    RoundCorner 8
}

skinparam card {
    RoundCorner 6
}

title Configuration Hierarchy Pattern\nPrecedence: Instance > User > System > Default

rectangle "Configuration Precedence\n(highest to lowest priority)" as main {
    
    card "Instance Config\n./myapp.conf\nCommand-line args\nEnvironment vars" as instance #FFCDD2
    
    card "User Config\n~/.config/myapp/config\n~/.myapprc\nXDG_CONFIG_HOME" as user #FFE0B2
    
    card "System Config\n/etc/myapp/config\n/etc/myapp.conf\nAdmin customizations" as system #FFF9C4
    
    card "Default Config\n/usr/share/myapp/defaults\nShipped with application\nRead-only baseline" as default #E8F5E9
    
    instance -[#C62828]down-> user : overrides
    user -[#E65100]down-> system : overrides
    system -[#F9A825]down-> default : overrides
}

note right of instance
  Highest Priority
  Specific execution context
  Temporary overrides
end note

note right of user
  Personal preferences
  Survives updates
  Per-user customization
end note

note right of system
  Site-wide settings
  Admin controlled
  Affects all users
end note

note right of default
  Lowest Priority
  Sensible defaults
  Never modified
end note

legend bottom
  |= Layer |= Who Sets |= When Changed |
  | Instance | Developer/Script | Per execution |
  | User | End user | As needed |
  | System | Administrator | Deployment |
  | Default | Vendor | Software update |
endlegend

center footer Benefit: Sensible defaults with customization at appropriate levels
@enduml
