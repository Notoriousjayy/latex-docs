@startuml 05-dht-lookup

skinparam backgroundColor #FFFFFF
skinparam defaultFontName "Helvetica"
skinparam defaultFontSize 12
skinparam shadowing false
skinparam RoundCorner 10
skinparam sequenceArrowThickness 2

title <b>DHT Lookup: Structured Overlay Routing</b>\nO(log N) hops to locate any key in the network

skinparam participant {
  BackgroundColor #10B981
  FontColor #FFFFFF
  BorderColor #059669
}

skinparam sequence {
  ArrowColor #3B82F6
  LifeLineBorderColor #94A3B8
  LifeLineBackgroundColor #F1F5F9
  GroupBackgroundColor #F8FAFC
  GroupBorderColor #CBD5E1
}

participant "Requester\n(Node 8)" as req
participant "Node 21" as n21
participant "Node 42" as n42
participant "Responsible\n(Node 53)" as resp

req -> n21 : lookup(key=50)
note right: Closest known node\nto key 50 in finger table

n21 -> n42 : forward(key=50)
note right: Progressively closer\nin identifier space

n42 -> resp : forward(key=50)
note right: Node 53 is responsible\nfor key range including 50

resp --> n42 : found(key=50, value)
n42 --> n21 : relay(value)
n21 --> req : result(value)

note over req, resp
  Each hop halves the remaining distance in identifier space.
  For N peers, lookup completes in O(log N) hops.
end note
@enduml
