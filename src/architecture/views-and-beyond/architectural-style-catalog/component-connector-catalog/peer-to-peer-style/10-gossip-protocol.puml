@startuml 10-gossip-protocol

skinparam backgroundColor #FFFFFF
skinparam defaultFontName "Helvetica"
skinparam defaultFontSize 12
skinparam shadowing false
skinparam RoundCorner 10
skinparam padding 4

title <b>Gossip Protocol: Epidemic Information Spread</b>\nProbabilistic dissemination converges to full network coverage

skinparam rectangle {
  BackgroundColor<<informed>> #10B981
  FontColor<<informed>> #FFFFFF
  BorderColor<<informed>> #059669
  BackgroundColor<<uninformed>> #E2E8F0
  FontColor<<uninformed>> #334155
  BorderColor<<uninformed>> #CBD5E1
  BackgroundColor<<receiving>> #F59E0B
  FontColor<<receiving>> #FFFFFF
  BorderColor<<receiving>> #D97706
}

skinparam package {
  BackgroundColor #F8FAFC
  BorderColor #CBD5E1
  FontStyle bold
}

package "Round 1: Origin gossips" as R1 {
  rectangle " P1 " as r1_1 <<informed>>
  rectangle " P2 " as r1_2 <<receiving>>
  rectangle " P3 " as r1_3 <<receiving>>
  rectangle " P4 " as r1_4 <<uninformed>>
  rectangle " P5 " as r1_5 <<uninformed>>
  rectangle " P6 " as r1_6 <<uninformed>>

  r1_1 -[#10B981,bold]-> r1_2 : gossip
  r1_1 -[#10B981,bold]-> r1_3 : gossip
}

package "Round 2: Spread continues" as R2 {
  rectangle " P1 " as r2_1 <<informed>>
  rectangle " P2 " as r2_2 <<informed>>
  rectangle " P3 " as r2_3 <<informed>>
  rectangle " P4 " as r2_4 <<receiving>>
  rectangle " P5 " as r2_5 <<receiving>>
  rectangle " P6 " as r2_6 <<uninformed>>

  r2_2 -[#10B981,bold]-> r2_4 : gossip
  r2_3 -[#10B981,bold]-> r2_5 : gossip
}

package "Round 3: Convergence" as R3 {
  rectangle " P1 " as r3_1 <<informed>>
  rectangle " P2 " as r3_2 <<informed>>
  rectangle " P3 " as r3_3 <<informed>>
  rectangle " P4 " as r3_4 <<informed>>
  rectangle " P5 " as r3_5 <<informed>>
  rectangle " P6 " as r3_6 <<receiving>>

  r3_4 -[#10B981,bold]-> r3_6 : gossip
}

legend right
  |<#10B981> <color:#FFFFFF>  Informed  </color>| Has the update |
  |<#F59E0B> <color:#FFFFFF>  Receiving  </color>| Getting update now |
  |<#E2E8F0>   Uninformed  | Not yet reached |

  Converges in **O(log N)** rounds
end legend
@enduml
