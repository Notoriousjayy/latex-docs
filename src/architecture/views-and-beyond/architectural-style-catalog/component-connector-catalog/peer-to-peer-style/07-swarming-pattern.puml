@startuml 07-swarming-pattern

skinparam backgroundColor #FFFFFF
skinparam defaultFontName "Helvetica"
skinparam defaultFontSize 12
skinparam shadowing false
skinparam RoundCorner 10
skinparam padding 4

title <b>BitTorrent Swarming Pattern</b>\nPeers exchange different pieces to collaboratively reconstruct complete content

skinparam rectangle {
  BackgroundColor<<seeder>> #3B82F6
  FontColor<<seeder>> #FFFFFF
  BorderColor<<seeder>> #2563EB
  BackgroundColor<<leecher>> #10B981
  FontColor<<leecher>> #FFFFFF
  BorderColor<<leecher>> #059669
  BackgroundColor<<piece>> #F8FAFC
  FontColor<<piece>> #334155
  BorderColor<<piece>> #CBD5E1
}

skinparam package {
  BackgroundColor #FEFCE8
  BorderColor #FDE68A
  FontStyle bold
}

rectangle "Seeder\n(has all pieces)" as seed <<seeder>>

rectangle "Leecher A\nhas: 1, 3" as la <<leecher>>
rectangle "Leecher B\nhas: 2, 4" as lb <<leecher>>
rectangle "Leecher C\nhas: 1, 2" as lc <<leecher>>

seed -[#3B82F6,bold]-> la : piece 2
seed -[#3B82F6,bold]-> lb : piece 1
seed -[#3B82F6,bold]-> lc : piece 3

la -[#10B981]-> lb : piece 3
lb -[#10B981]-> la : piece 4
la -[#10B981]-> lc : piece 3
lc -[#10B981]-> lb : piece 2
lb -[#10B981]-> lc : piece 4

note bottom
  **Swarming benefits:**
  • Load distributed across all peers
  • Parallel downloads from multiple sources
  • Tit-for-tat incentivizes uploading
  • Rarest-first piece selection improves availability
end note

legend right
  |<#3B82F6> <color:#FFFFFF>  Seeder  </color>| Has complete content |
  |<#10B981> <color:#FFFFFF>  Leecher  </color>| Downloading + sharing |
end legend
@enduml
