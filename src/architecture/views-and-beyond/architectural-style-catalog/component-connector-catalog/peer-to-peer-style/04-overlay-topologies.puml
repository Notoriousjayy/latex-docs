@startuml 04-overlay-topologies

skinparam backgroundColor #FFFFFF
skinparam defaultFontName "Helvetica"
skinparam defaultFontSize 12
skinparam shadowing false
skinparam RoundCorner 10
skinparam padding 4

title <b>Overlay Network Topologies</b>\nThree fundamental approaches to peer organization

skinparam rectangle {
  BackgroundColor<<peer>> #10B981
  FontColor<<peer>> #FFFFFF
  BorderColor<<peer>> #059669
  BackgroundColor<<super>> #3B82F6
  FontColor<<super>> #FFFFFF
  BorderColor<<super>> #2563EB
  BackgroundColor<<ordinary>> #BFDBFE
  FontColor<<ordinary>> #1E3A5F
  BorderColor<<ordinary>> #93C5FD
}

skinparam package {
  BackgroundColor #F8FAFC
  BorderColor #CBD5E1
  FontStyle bold
}

package "Unstructured Overlay" as UO {
  rectangle "  P1  " as u1 <<peer>>
  rectangle "  P2  " as u2 <<peer>>
  rectangle "  P3  " as u3 <<peer>>
  rectangle "  P4  " as u4 <<peer>>
  rectangle "  P5  " as u5 <<peer>>

  u1 -[#10B981]- u2
  u2 -[#10B981]- u3
  u1 -[#10B981]- u4
  u3 -[#10B981]- u5
  u4 -[#10B981]- u5
  u2 -[#10B981]- u5
}

package "Structured Overlay (DHT Ring)" as SO {
  rectangle "  N0  " as s0 <<peer>>
  rectangle " N32 " as s1 <<peer>>
  rectangle " N64 " as s2 <<peer>>
  rectangle " N96 " as s3 <<peer>>

  s0 -[#10B981]-> s1 : " successor "
  s1 -[#10B981]-> s2 : " successor "
  s2 -[#10B981]-> s3 : " successor "
  s3 -[#10B981]-> s0 : " successor "
  s0 .[#F59E0B].> s2 : " finger "
}

package "Hierarchical Overlay" as HO {
  rectangle " Super A " as ha <<super>>
  rectangle " Super B " as hb <<super>>
  rectangle " Leaf 1 " as h1 <<ordinary>>
  rectangle " Leaf 2 " as h2 <<ordinary>>
  rectangle " Leaf 3 " as h3 <<ordinary>>
  rectangle " Leaf 4 " as h4 <<ordinary>>

  ha <-[#3B82F6]-> hb
  ha -[#93C5FD]-> h1
  ha -[#93C5FD]-> h2
  hb -[#93C5FD]-> h3
  hb -[#93C5FD]-> h4
}

legend right
  **Unstructured:** random connections,
  flood-based search (e.g., Gnutella)

  **Structured:** deterministic placement,
  O(log N) routing (e.g., Chord)

  **Hierarchical:** super peers coordinate
  clusters (e.g., Kazaa)
end legend
@enduml
