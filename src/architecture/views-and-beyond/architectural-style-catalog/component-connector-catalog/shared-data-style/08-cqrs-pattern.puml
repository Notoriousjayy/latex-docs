@startuml
skinparam backgroundColor #FEFEFE
skinparam defaultFontSize 11
skinparam defaultFontName Arial
skinparam shadowing false

skinparam component {
    BorderColor #455A64
}

skinparam database {
    FontColor #263238
}

skinparam queue {
    BackgroundColor #F3E5F5
    BorderColor #7B1FA2
}

title CQRS Pattern\nCommand Query Responsibility Segregation

rectangle "Command Side (Write Path)" as cmdSide #E8F5E9 {
    [Command\nHandler] as cmdHandler #C8E6C9
    database "Write Model\n(Normalized)" as writeDb #FFF3E0
}

rectangle "Query Side (Read Path)" as querySide #E3F2FD {
    [Query\nHandler] as queryHandler #BBDEFB
    database "Read Model\n(Denormalized)" as readDb #FFF3E0
}

queue "Sync\nMechanism" as sync #F3E5F5

[Client\nApplication] as client #ECEFF1

client --> cmdHandler : Commands\n(Create, Update, Delete)
cmdHandler --> writeDb : Write

writeDb --> sync : Change events
sync --> readDb : Propagate

client --> queryHandler : Queries\n(Read)
queryHandler --> readDb : Read

note bottom of cmdSide
  Optimized for Writes
  Normalized schema
  ACID transactions
end note

note bottom of querySide
  Optimized for Reads
  Denormalized views
  Fast query response
end note

note right of sync
  Eventual consistency
  between models
end note

legend bottom
  CQRS separates read and write concerns,
  allowing independent optimization of each path
endlegend

@enduml
