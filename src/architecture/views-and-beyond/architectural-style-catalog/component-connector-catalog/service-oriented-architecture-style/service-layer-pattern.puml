@startuml service-layer-pattern
!define PROCESS #4A90A4
!define BUSINESS #5BA0B4
!define ENTITY #6CB0C4
!define UTILITY #E8A838

skinparam backgroundColor white
skinparam componentStyle rectangle
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam padding 10
skinparam roundCorner 8

skinparam component {
    BackgroundColor<<process>> PROCESS
    FontColor<<process>> white
    BorderColor<<process>> #3A7084
    
    BackgroundColor<<business>> BUSINESS
    FontColor<<business>> white
    BorderColor<<business>> #4A8094
    
    BackgroundColor<<entity>> ENTITY
    FontColor<<entity>> white
    BorderColor<<entity>> #5A90A4
    
    BackgroundColor<<utility>> UTILITY
    FontColor<<utility>> white
    BorderColor<<utility>> #C88A28
}

skinparam rectangle {
    BackgroundColor #FAFAFA
    BorderColor #DDDDDD
}

skinparam arrow {
    Color #555555
    FontSize 9
}

title Service Layer Pattern

rectangle "Process Services" as proclayer #F0F8FF {
    component "Order\nFulfillment" as fulfill <<process>>
    component "Customer\nOnboarding" as onboard <<process>>
}

rectangle "Business Services" as bizlayer #F5FFFA {
    component "Order\nManagement" as ordermgmt <<business>>
    component "Payment\nProcessing" as payment <<business>>
    component "Inventory\nManagement" as inventory <<business>>
}

rectangle "Entity Services" as entitylayer #FFFAF0 {
    component "Customer\nService" as customer <<entity>>
    component "Product\nService" as product <<entity>>
    component "Account\nService" as account <<entity>>
}

rectangle "Utility Services" as utilitylayer #FFF8F0 {
    component "Notification" as notify <<utility>>
    component "Logging" as logging <<utility>>
    component "Authentication" as auth <<utility>>
}

' Process to Business
fulfill -down-> ordermgmt
fulfill -down-> payment
fulfill -down-> inventory
onboard -down-> payment

' Business to Entity
ordermgmt -down-> customer
ordermgmt -down-> product
payment -down-> account
inventory -down-> product

' Cross-cutting utility usage
ordermgmt -[dashed]-> notify
payment -[dashed]-> logging
onboard -[dashed]-> auth

note right of proclayer
  **Orchestrate** workflows
  spanning multiple services
end note

note right of bizlayer
  **Implement** business
  rules and logic
end note

note right of entitylayer
  **Manage** data access
  for business entities
end note

note right of utilitylayer
  **Provide** cross-cutting
  infrastructure capabilities
end note

@enduml
