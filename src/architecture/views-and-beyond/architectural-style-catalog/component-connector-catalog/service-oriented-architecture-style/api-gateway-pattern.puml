@startuml api-gateway-pattern
!define CLIENT #E8A838
!define GATEWAY #4A90A4
!define SERVICE #6CB0C4
!define LIGHTBG #F8F9FA

skinparam backgroundColor white
skinparam componentStyle rectangle
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam padding 8
skinparam roundCorner 8

skinparam component {
    BackgroundColor<<client>> CLIENT
    FontColor<<client>> white
    BorderColor<<client>> #C88A28
    
    BackgroundColor<<gateway>> GATEWAY
    FontColor<<gateway>> white
    BorderColor<<gateway>> #3A7084
    
    BackgroundColor<<service>> SERVICE
    FontColor<<service>> white
    BorderColor<<service>> #5A90A4
}

skinparam rectangle {
    BackgroundColor LIGHTBG
    BorderColor #CCCCCC
}

skinparam arrow {
    Color #555555
    FontSize 9
}

skinparam note {
    BackgroundColor #FFFDE7
    BorderColor #E8A838
}

title API Gateway Pattern

rectangle "External Clients" as clients {
    component "Web App" as web <<client>>
    component "Mobile App" as mobile <<client>>
    component "Partner API" as partner <<client>>
}

component "API Gateway" as gateway <<gateway>> {
}

rectangle "Gateway Responsibilities" as resp #FFFFFF {
    card "Authentication" as auth
    card "Rate Limiting" as rate
    card "Request Routing" as route
    card "Load Balancing" as lb
    card "Response Caching" as cache
    card "Protocol Translation" as proto
}

rectangle "Backend Services" as backend {
    component "User\nService" as user <<service>>
    component "Order\nService" as order <<service>>
    component "Product\nService" as product <<service>>
    component "Payment\nService" as payment <<service>>
}

' Client connections
web -down-> gateway
mobile -down-> gateway
partner -down-> gateway

' Gateway to responsibilities (hidden links for layout)
gateway -[hidden]-> resp

' Gateway to services
gateway -down-> user : /users/*
gateway -down-> order : /orders/*
gateway -down-> product : /products/*
gateway -down-> payment : /payments/*

note bottom of gateway
  **Single entry point**
  Clients see one unified API
  
  **Decouples** clients from
  internal service topology
end note

note bottom of backend
  Services can be **scaled**,
  **versioned**, and **replaced**
  independently
end note

@enduml
