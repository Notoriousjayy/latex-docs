@startuml
skinparam backgroundColor #FEFEFE
skinparam defaultFontName Helvetica
skinparam defaultFontSize 11
skinparam componentStyle rectangle

skinparam package {
    BackgroundColor #FFFFFF
    BorderColor #888888
    FontColor #333333
}

title Common Publish-Subscribe Patterns\nFan-out, fan-in, and consumer groups for scalable event processing

package "Fan-Out Pattern (One-to-Many)" {
    component "Publisher" as FOP #4A90D9
    component "Topic" as FOT #F5A623
    component "Sub 1" as FOS1 #5BAE5B
    component "Sub 2" as FOS2 #5BAE5B
    component "Sub 3" as FOS3 #5BAE5B
    
    FOP -right-> FOT
    FOT -right-> FOS1
    FOT -right-> FOS2
    FOT -right-> FOS3
}

package "Fan-In Pattern (Many-to-One)" {
    component "Pub A" as FIA #4A90D9
    component "Pub B" as FIB #4A90D9
    component "Pub C" as FIC #4A90D9
    component "Topic" as FIT #F5A623
    component "Subscriber" as FIS #5BAE5B
    
    FIA -right-> FIT
    FIB -right-> FIT
    FIC -right-> FIT
    FIT -right-> FIS
}

package "Consumer Groups (Load-Balanced)" {
    component "Publisher" as CGP #4A90D9
    component "Partitioned\nTopic" as CGT #F5A623
    
    component "Instance 1" as CGS1 #5BAE5B
    component "Instance 2" as CGS2 #5BAE5B
    component "Instance 3" as CGS3 #5BAE5B
    
    CGP -right-> CGT
    CGT -right-> CGS1
    CGT -right-> CGS2
    CGT -right-> CGS3
}

note bottom of CGT
  Each event goes to
  ONE instance only
end note

@enduml
