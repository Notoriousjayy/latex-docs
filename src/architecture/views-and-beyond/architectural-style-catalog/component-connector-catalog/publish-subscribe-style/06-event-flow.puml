@startuml
skinparam backgroundColor #FEFEFE
skinparam defaultFontName Helvetica
skinparam defaultFontSize 11

title Event Distribution Flow\nSequence of operations from publication to processing

participant "Publisher" as P #4A90D9
participant "Pub-Sub\nConnector" as C #F5A623
participant "Subscriber A" as SA #5BAE5B
participant "Subscriber B" as SB #5BAE5B

== Event Publication ==

P -> P : Create event
P -> C : announce(event)

== Event Routing ==

C -> C : Match subscriptions
C -> C : Determine recipients

== Event Delivery ==

C -> SA : dispatch(event)
C -> SB : dispatch(event)

== Event Processing ==

SA -> SA : Process event
SA --> C : acknowledge

SB -> SB : Process event
SB --> C : acknowledge

note over P,SB
  Publisher is decoupled from delivery
  and processing - may continue immediately
  after announce (async) or wait (sync)
end note

@enduml
