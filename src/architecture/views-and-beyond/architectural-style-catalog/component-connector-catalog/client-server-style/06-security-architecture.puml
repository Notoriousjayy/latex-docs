@startuml
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam shadowing false
skinparam roundCorner 5

skinparam rectangle {
    BorderColor #424242
}

skinparam package {
    BackgroundColor #FAFAFA
    BorderColor #BDBDBD
}

title Client-Server Security Architecture

rectangle "Client" as CLIENT #E3F2FD {
    rectangle "Credentials" as CRED #BBDEFB
}

package "Security Boundary" {
    rectangle "TLS Termination" as TLS #FFEBEE
    rectangle "Authentication" as AUTH #FFEBEE
    rectangle "Authorization" as AUTHZ #FFEBEE
    rectangle "Input Validation" as VAL #FFEBEE
    rectangle "Rate Limiting" as RATE #FFEBEE
}

rectangle "Server" as SERVER #E8F5E9 {
    rectangle "Business Logic" as BL #C8E6C9
}

rectangle "Data Store" as DATA #FFF8E1 {
    rectangle "Encrypted at Rest" as EAR #FFECB3
}

rectangle "Audit Log" as AUDIT #FFEBEE

CLIENT --> TLS : HTTPS
TLS --> AUTH : Decrypt
AUTH --> AUTHZ : Identity
AUTHZ --> RATE : Permissions
RATE --> VAL : Throttle
VAL --> SERVER : Sanitized

SERVER --> DATA : Access
SERVER ..> AUDIT : Log events

note right of AUTH
  Methods:
  Password, API Keys
  OAuth/OIDC, mTLS
end note

note right of AUTHZ
  Models:
  RBAC, ABAC
  Policy-based
end note

note bottom of VAL
  All client input must be
  validated on the server
end note

legend right
  |= Layer |= Purpose |
  | <#FFEBEE> | Security Control |
  | <#E3F2FD> | Client |
  | <#E8F5E9> | Server |
  | <#FFF8E1> | Data |
endlegend
@enduml
